import React, {
    PureComponent } from 'react';
import './Login.css';
import { connect } from 'react-redux';
import { getToken } from '../../utils/localStorage';
import Header from '../Header';
import { login } from '../../actions/userAction';
import LoginForm from './LoginForm';


export class Login extends PureComponent {
    componentWillMount() {
        if (getToken())
        { this.props.history.replace('/'); }
    }

    onSubmit = async (formValues) => {
        console.log('this.props', this.props);
        await this.props.login(formValues);

        if (getToken()) {
            this.props.history.replace('/');
        }


    }


    render() {
        return (
            <div>
                {/*<Header />*/}
                <div className="center">
                    <svg width="340" height="88" viewBox="0 0 340 88" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M73.2053 29.3149C81.2552 45.505 74.6562 65.1554 58.466 73.2053C42.2759 81.2552 22.6254 74.6562 14.5756 58.466C6.5257 42.2758 13.1247 22.6254 29.3149 14.5756C45.505 6.52569 65.1555 13.1247 73.2053 29.3149Z" fill="#1D61DA"/>
                        <path d="M79.0437 51.8666C79.0437 55.4926 77.7808 58.4463 75.2548 60.7278C72.7696 62.9686 69.4084 64.089 65.1714 64.089C63.1343 64.089 60.8324 63.8242 58.2657 63.2945C55.7398 62.7242 53.6416 62.0519 51.9712 61.2779L54.2323 54.0055C57.9805 55.7167 61.525 56.5722 64.8658 56.5722C68.6547 56.5722 70.5492 55.1056 70.5492 52.1722C70.5492 50.7462 69.9177 49.524 68.6547 48.5055C67.3917 47.4869 65.6806 46.4888 63.5213 45.511C61.362 44.4925 59.8139 43.7184 58.8768 43.1887C57.9805 42.6591 56.9824 41.9054 55.8824 40.9276C53.8045 39.0942 52.7656 36.4257 52.7656 32.922C52.7656 29.4182 53.9879 26.6682 56.4324 24.6719C58.9176 22.6755 61.9732 21.6774 65.5991 21.6774C69.2658 21.6774 73.1974 22.4515 77.3937 23.9996L74.9492 30.6608C71.6085 29.4793 68.7566 28.8886 66.3936 28.8886C63.0121 28.8886 61.3009 30.233 61.2602 32.922C61.2602 34.022 61.6269 34.8572 62.3602 35.4275C63.0935 35.9572 63.6232 36.3442 63.9491 36.5887C64.275 36.7924 64.9269 37.159 65.9047 37.6887C66.9232 38.1776 67.8603 38.6665 68.7158 39.1554C69.5714 39.6035 70.3455 40.0517 71.0381 40.4998C71.7714 40.9072 72.7289 41.5591 73.9103 42.4554C75.0918 43.3517 75.9882 44.1869 76.5993 44.961C78.2289 46.9981 79.0437 49.2999 79.0437 51.8666Z" fill="white"/>
                        <path d="M91.4566 35.4275C92.5159 34.3683 93.9622 33.4312 95.7956 32.6164C97.6696 31.8016 99.6456 31.3942 101.723 31.3942C103.801 31.3942 105.41 31.7405 106.551 32.4331C107.692 33.1257 108.609 34.1849 109.301 35.6109C110.401 34.4701 111.888 33.4923 113.762 32.6775C115.677 31.8219 117.592 31.3942 119.507 31.3942C123.011 31.3942 125.374 32.3108 126.596 34.1442C127.859 35.9368 128.49 38.5035 128.49 41.8443V63.2945H119.935V43.3721C119.935 40.7646 119.385 39.2165 118.285 38.7276C117.755 38.4831 117.042 38.3609 116.146 38.3609C113.864 38.3609 111.929 39.1146 110.34 40.622C110.381 40.9072 110.401 41.335 110.401 41.9054V63.2945H101.846V43.3721C101.846 40.7646 101.296 39.2165 100.196 38.7276C99.666 38.4831 98.953 38.3609 98.0567 38.3609C95.7752 38.3609 93.84 39.1146 92.2511 40.622V63.2945H83.6954V31.9442H90.7233L91.4566 35.4275Z" fill="white"/>
                        <path d="M163.076 62.2556C160.998 63.3964 158.717 63.9668 156.231 63.9668C153.787 63.9668 151.974 63.0297 150.792 61.1556C148.429 63.1112 145.659 64.089 142.481 64.089C139.303 64.089 136.9 63.2945 135.27 61.7056C133.64 60.076 132.826 57.876 132.826 55.1056C132.826 53.2722 133.213 51.7037 133.987 50.3999C134.761 49.0962 135.759 48.1388 136.981 47.5277C139.222 46.4684 141.544 45.9388 143.948 45.9388C146.392 45.9388 148.348 45.9999 149.815 46.1221V43.1276C149.815 41.0091 149.387 39.6443 148.531 39.0331C147.676 38.422 146.209 38.1165 144.131 38.1165C142.094 38.1165 139.792 38.5442 137.226 39.3998L135.453 34.022C136.961 33.1257 138.794 32.4534 140.953 32.0053C143.153 31.5164 145.028 31.2719 146.576 31.2719C150.731 31.2719 153.685 32.1682 155.437 33.9609C157.23 35.7127 158.126 38.7276 158.126 43.0054V55.8389C158.126 56.9797 158.635 57.55 159.654 57.55C160.183 57.55 160.937 57.4278 161.915 57.1834L163.076 62.2556ZM144.803 58.4056C146.515 58.4056 148.185 57.876 149.815 56.8167V50.3999C148.674 50.3185 147.676 50.2777 146.82 50.2777C142.787 50.2777 140.77 51.5814 140.77 54.1889C140.77 57 142.115 58.4056 144.803 58.4056Z" fill="white"/>
                        <path d="M181.517 38.2387C178.177 38.2387 175.834 39.1961 174.489 41.1109V63.2945H165.934V31.9442H173.023L173.695 35.9164C176.058 32.8201 179.073 31.2719 182.74 31.2719C183.758 31.2719 184.695 31.3738 185.551 31.5775L184.145 38.6054C183.249 38.3609 182.373 38.2387 181.517 38.2387Z" fill="white"/>
                        <path d="M192.148 53.2111V37.872L186.648 37.5053V32.4942L192.331 32.0053V24.8552L200.887 24.1218V31.9442H209.809L209.32 37.872H200.826V54.0055C200.826 55.187 201.009 56.0426 201.376 56.5722C201.743 57.0611 202.517 57.3056 203.698 57.3056C204.88 57.3056 206.204 57.1222 207.67 56.7556L208.954 62.8056C206.957 63.6612 204.92 64.089 202.843 64.089C200.805 64.089 199.257 63.9668 198.198 63.7223C197.179 63.4779 196.324 63.1927 195.631 62.8668C194.979 62.5408 194.409 62.0723 193.92 61.4612C193.472 60.8093 193.126 60.2389 192.881 59.7501C192.678 59.2612 192.515 58.5686 192.392 57.6722C192.229 56.45 192.148 54.963 192.148 53.2111Z" fill="white"/>
                        <path d="M236.413 38.6054V22.4718H245.151V63.2945H236.413V45.6943H223.029V63.2945H214.29V22.4718H223.029V38.6054H236.413Z" fill="white"/>
                        <path d="M270.996 60.4223C267.859 62.8668 264.518 64.089 260.974 64.089C257.47 64.089 255.066 63.1927 253.763 61.4001C252.5 59.5667 251.868 56.9797 251.868 53.6389V31.9442H260.424V52.1111C260.424 53.7407 260.668 54.9833 261.157 55.8389C261.646 56.6945 262.848 57.1222 264.763 57.1222C266.718 57.1222 268.531 56.4908 270.202 55.2278V31.9442H278.757V64.089H271.729L270.996 60.4223Z" fill="white"/>
                        <path d="M303.139 31.3942C306.684 31.3942 309.087 32.3108 310.35 34.1442C311.654 35.9368 312.306 38.5035 312.306 41.8443V63.2945H303.75V43.3721C303.75 41.7832 303.485 40.5609 302.956 39.7054C302.467 38.8091 301.245 38.3609 299.289 38.3609C297.333 38.3609 295.561 39.1146 293.972 40.622V63.2945H285.233V31.9442H292.444L293.178 35.4275C294.359 34.3275 295.846 33.3905 297.639 32.6164C299.472 31.8016 301.306 31.3942 303.139 31.3942Z" fill="white"/>
                        <path d="M321.772 53.2111V37.872L316.272 37.5053V32.4942L321.955 32.0053V24.8552L330.511 24.1218V31.9442H339.433L338.944 37.872H330.45V54.0055C330.45 55.187 330.633 56.0426 331 56.5722C331.366 57.0611 332.141 57.3056 333.322 57.3056C334.504 57.3056 335.828 57.1222 337.294 56.7556L338.578 62.8056C336.581 63.6612 334.544 64.089 332.466 64.089C330.429 64.089 328.881 63.9668 327.822 63.7223C326.803 63.4779 325.948 63.1927 325.255 62.8668C324.603 62.5408 324.033 62.0723 323.544 61.4612C323.096 60.8093 322.75 60.2389 322.505 59.7501C322.302 59.2612 322.139 58.5686 322.016 57.6722C321.853 56.45 321.772 54.963 321.772 53.2111Z" fill="white"/>
                    </svg>

                    <div className="card">
                        <div>
                            {/*<h3>Login</h3>*/}
                            <LoginForm onSubmit={this.onSubmit} />
                        </div>
                    </div>
                </div>
            </div>
        );
    }
}

export default connect(
    null,
    { login }
)(Login);

